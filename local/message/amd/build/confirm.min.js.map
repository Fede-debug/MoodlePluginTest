{"version":3,"file":"confirm.min.js","sources":["../src/confirm.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n//namespace local_message;\n\n/**\n * Hook callbacks for usertours.\n *\n * @module     local_message\n * @copyright  Federico Diana\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n//import ModalFactory from 'core/modal_factory';\n\n// require(['jquery', 'core/modal_factory'], function($) {\n\n\n//     window.console.log('test');\n//     window.console.log($('.local_message_delete_button'));\n\n//     var trigger = $('.local_message_delete_button');\n\n//         ModalFactory.create({\n//         title: 'test title',\n//         body: '<p>test body content</p>',\n//         footer: 'An example footer content',\n//     }, trigger)\n// .done(function(/*modal*/){\n//     Y.log('Finished modal');\n// });\n// });\nimport ModalSaveCancel from 'core/modal_save_cancel';\nimport {get_string as getString} from 'core/str';\n// import jQuery from 'jquery';\nimport ModalEvents from 'core/modal_events';\n\nexport const init = async (messageid) => {\n    const modal = await ModalSaveCancel.create({\n        title: getString('message_deletion', 'local_message'),\n        body: getString('delete_message_confirm', 'local_message'),\n        // preShowCallBack: function() {\n        //     window.console.log('test');\n\n        //     //modalP.params = {'messageid': messageid}\n        // }\n    });\n    \n    modal.params = {'messageid': messageid};\n    modal.getRoot().on(ModalEvents.save, (e) => {\n        window.console.log('id getroot' + modal.params);\n        e.preventDefault();\n    });\n\n    // ...\n    modal.setSaveButtonText(getString('delete_button_modal', 'local_message'));\n    //modal.param('messageid', messageid);\n    modal.show();\n};\n\n//init.apply();\n// jQuery('local_message_delete_button').click(function(){\n//     //do something here\n//     init.apply();\n// });\n\n// document.querySelector('.local_message_delete_button').addEventListener('click', event => init.apply());\n\nconst deleteButtons = document.querySelectorAll('.local_message_delete_button');\n//deleteButton.addEventListener('click', onDeleteButtonClick);\n\n\ndeleteButtons.forEach( button => {button.addEventListener('click', onDeleteButtonClick); \n    let classListString = button.classList[0];\n    let myid = classListString.substr(classListString.lastIndexOf('local_message') + 'local_message'.length);\nbutton.myParam = myid;\n                            });\n\n\n\nfunction onDeleteButtonClick(event){\n    \n    window.console.log('test');\n    Y.log('Y log test');\n//let messageid = classListString.substr(classListString.lastIndeOf('local_messageid') + 'local_messageid'.length);\nwindow.console.log(event.currentTarget.myParam);\n\n    init.apply(event.currentTarget.myParam);\n}"],"names":["init","async","modal","ModalSaveCancel","create","title","body","params","messageid","getRoot","on","ModalEvents","save","e","window","console","log","preventDefault","setSaveButtonText","show","onDeleteButtonClick","event","Y","currentTarget","myParam","apply","document","querySelectorAll","forEach","button","addEventListener","classListString","classList","myid","substr","lastIndexOf","length"],"mappings":";;;;;;;0MAiDaA,KAAOC,MAAAA,kBACVC,YAAcC,2BAAgBC,OAAO,CACvCC,OAAO,mBAAU,mBAAoB,iBACrCC,MAAM,mBAAU,yBAA0B,mBAQ9CJ,MAAMK,OAAS,WAAcC,WAC7BN,MAAMO,UAAUC,GAAGC,sBAAYC,MAAOC,IAClCC,OAAOC,QAAQC,IAAI,aAAed,MAAMK,QACxCM,EAAEI,oBAINf,MAAMgB,mBAAkB,mBAAU,sBAAuB,kBAEzDhB,MAAMiB,oCAuBDC,oBAAoBC,OAEzBP,OAAOC,QAAQC,IAAI,QACnBM,EAAEN,IAAI,cAEVF,OAAOC,QAAQC,IAAIK,MAAME,cAAcC,SAEnCxB,KAAKyB,MAAMJ,MAAME,cAAcC,SAnBbE,SAASC,iBAAiB,gCAIlCC,SAASC,SAAWA,OAAOC,iBAAiB,QAASV,yBAC3DW,gBAAkBF,OAAOG,UAAU,GACnCC,KAAOF,gBAAgBG,OAAOH,gBAAgBI,YAAY,iBAAmB,gBAAgBC,QACrGP,OAAOL,QAAUS"}